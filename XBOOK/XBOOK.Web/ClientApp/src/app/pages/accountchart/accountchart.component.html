<nb-card>
  <nb-card-header>
    <div class="row">
      <div class="col-4 d-flex">
        <div class="card__title pr-3 pt-1">{{ 'ACCOUNT.CHART.HEADER' | translate }}</div>
        <div (click)='SearchGenLed()'>
          <img src="../../../assets/search.png" alt="search General Ledger" class="button__search"></div>
      </div>
      <div class="col-4">
        <div ngbDropdown>
          <button class="btn btn-flat mr-1" id="bulkActions" ngbDropdownToggle>{{ 'COMMON.MOREACTION' | translate }}
          </button>
          <div ngbDropdownMenu aria-labelledby="bulkActions">
            <button class="dropdown-item"><span class="icon-import"></span>
              {{ 'COMMON.MOREACTION.IMPORT' | translate }} </button>
            <button [disabled]="authenticationService.hasPermission('Account Chart','create')" class="dropdown-item"
              (click)="showCreateOrEditAccountDialog()"><span class="icon-export"></span>
              {{ 'ACCOUNT.CHART.CREATE' | translate }} </button>
          </div>
        </div>
      </div>
      <div class="col-4">
        <button routerLink="/pages/journalentries/new"
          class="btn btn-raised mr-1 btn-success float-right">{{'ACCOUNT.CHART.MENPEN' | translate}}</button>
      </div>
    </div>
  </nb-card-header>
  <nb-card-body>

    <div class="row">
      <div class="col-md-12">
        <ngx-datatable #myTable class="bootstrap hover no-striped flex" [rows]="data"
          [loadingIndicator]="loadingIndicator" [columnMode]="ColumnMode.force" [headerHeight]="60" [footerHeight]="50"
          [rowHeight]="getRowHeight" [reorderable]="reorderable" (activate)="onActivate($event)"
          [selectAllRowsOnPage]="false" [limit]="50" (treeAction)="onTreeAction($event)"
          [treeToRelation]="'accountNumber'" [treeFromRelation]="'parentId'">

          <ngx-datatable-column [treeLevelIndent]="20" name="{{'ACCOUNT.CHART.GRID.HEADER.ACCOUNTNUMBER' | translate}}"
            prop="accountNumber" [isTreeColumn]="true">
            <ng-template ngx-datatable-tree-toggle let-tree="cellContext">
              <button class="btnArrow" [disabled]="tree.treeStatus === 'disabled'" (click)="tree.onTreeAction()">
                <span *ngIf="tree.treeStatus === 'loading'">
                  ...
                </span>
                <span class="collapsed" *ngIf="tree.treeStatus === 'collapsed'">
                </span>
                <span class="expanded" *ngIf="tree.treeStatus === 'expanded'">
                </span>
                <span *ngIf="tree.treeStatus === 'disabled'">

                </span>
              </button>
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column name="{{'ACCOUNT.CHART.GRID.HEADER.ACCOUNTNAME' | translate}}" prop="accountName">
            <ng-template let-row="row" ngx-datatable-cell-template>{{row.accountName}}
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column name="{{'ACCOUNT.CHART.GRID.HEADER.TYPE' | translate}}" prop="accountType">
            <ng-template let-row="row" ngx-datatable-cell-template>{{row.accountType}}
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column name="{{'ACCOUNT.CHART.GRID.HEADER.NUMBERARISED' | translate}}" prop="parentAccount"
            [cellClass]="'col-right'" [headerClass]="'col-right'">
            <ng-template let-row="row" ngx-datatable-cell-template>
              <div class="col-right">
                1231241
              </div>
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column [width]="50" [sortable]="false" [canAutoResize]="false" [draggable]="false"
            [resizeable]="false" name="" [cellClass]="'col-action'" [headerClass]="'col-action'">

            <ng-template let-row="row" ngx-datatable-cell-template let-isSelected="isSelected">
              <div class="icon-actions">
                <div class="actions">
                  <a [hidden]="authenticationService.hasPermission('Account Chart','update')" class="icon-action">
                    <span (click)="editAccount(row, $event)" class="icon-edit"></span>
                  </a>
                </div>
                <div class="actions">
                  <a [hidden]="authenticationService.hasPermission('Account Chart','delete')" class="icon-action">
                    <span (click)="deleteAccount(row)" class="icon-delete"></span>
                  </a>
                </div>
              </div>
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-footer>
            <ng-template ngx-datatable-footer-template let-rowCount="rowCount" let-pageSize="pageSize"
              let-selectedCount="selectedCount" let-curPage="curPage" let-offset="offset" let-isVisible="isVisible">
              <div class="page-count pl-0">
                <span [translate]="'COMMON.GRID.TOTALROW'" [translateParams]="{rowCount: rowCount}"> </span>
              </div>
              <!-- |
                'Page Size':
                <select [ngModel]="page.size" (ngModelChange)="onPageSizeChange($event)" class="page-size-combo">
                  <option *ngFor="let size of sizeList" [value]="size"> {{size}}</option>
                </select> -->
              <datatable-pager [pagerLeftArrowIcon]="'datatable-icon-left'"
                [pagerRightArrowIcon]="'datatable-icon-right'" [pagerPreviousIcon]="'datatable-icon-prev'"
                [pagerNextIcon]="'datatable-icon-skip'" [count]="rowCount" [page]="curPage" [size]="pageSize"
                [hidden]="!((rowCount / pageSize) > 1)" (change)="myTable.onFooterPage($event)">
              </datatable-pager>
            </ng-template>
          </ngx-datatable-footer>
        </ngx-datatable>
      </div>
    </div>
  </nb-card-body>
</nb-card>